//////////////////////////////////////////////////////////////////////////////
// Project...: drax
// File......: DonationDlg.cpp
// Date......: 05.06.2010
// Author....: Stephan Arlt
//////////////////////////////////////////////////////////////////////////////

#include "StdAfx.h"
#include "DonationDlg.h"

//////////////////////////////////////////////////////////////////////////////
// 
//////////////////////////////////////////////////////////////////////////////
CDonationDlg::CDonationDlg(CWnd *ppwndParent)
	: CDialogEx(IDD_DONATION, ppwndParent),
	  m_kPicture(IDR_DONATE, 138, 80)
{
}

//////////////////////////////////////////////////////////////////////////////
// 
//////////////////////////////////////////////////////////////////////////////
CDonationDlg::~CDonationDlg()
{
}

BEGIN_MESSAGE_MAP(CDonationDlg, CDialogEx)
	ON_BN_CLICKED(IDC_BUTTON_LATER, OnDonateLater)
	ON_BN_CLICKED(IDC_BUTTON_ALREADY, OnAlreadyDonated)
	ON_WM_PAINT()
END_MESSAGE_MAP()

//////////////////////////////////////////////////////////////////////////////
// 
//////////////////////////////////////////////////////////////////////////////
BOOL CDonationDlg::OnInitDialog()
{
	if ( !CDialogEx::OnInitDialog() )
		return FALSE;

	// set URLs
	m_wndDonate.SetURL(DONATION_URL);

	return TRUE;
}

//////////////////////////////////////////////////////////////////////////////
// 
//////////////////////////////////////////////////////////////////////////////
void CDonationDlg::DoDataExchange(CDataExchange *ppkDX)
{
	DDX_Control(ppkDX, IDC_BUTTON_NOW, m_wndDonate);
}

//////////////////////////////////////////////////////////////////////////////
// 
//////////////////////////////////////////////////////////////////////////////
void CDonationDlg::OnDonateLater()
{
	EndDialog(IDOK);
}

//////////////////////////////////////////////////////////////////////////////
// 
//////////////////////////////////////////////////////////////////////////////
void CDonationDlg::OnAlreadyDonated()
{
	AfxSetDonated();
	EndDialog(IDOK);
}

//////////////////////////////////////////////////////////////////////////////
// 
//////////////////////////////////////////////////////////////////////////////
void CDonationDlg::OnPaint()
{
	// draw picture
	CPaintDC lkDC(this);
	m_kPicture.Paint(&lkDC);
	CDialogEx::OnPaint();
}